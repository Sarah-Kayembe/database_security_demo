{% extends "base.html" %}
{% block content %}

<h2>üóÑÔ∏è LEVEL 4 ‚Äî UNION SELECT File Dump</h2>

<div class="ascii-box">
    Deep within the Archive of Lost Records,  
    forbidden knowledge sleeps behind iron locks.

    <br><br>
    <strong>Hint:</strong><br>
    The Archive only responds to UNION-based magic  
    placed <u>in the URL bar</u> ‚Äî for example:
    <br>
    <code>/debug?id=1 union select name from sqlite_master --</code><br>
    <code>/debug?id=1 union select username || ':' || password from users --</code>
</div>

<hr>

<h3>Archive Response:</h3>

{% if not attempted %}
    <div class="ascii-box" style="font-size:0.9rem;">
        The shelves are quiet.  
        No query has yet disturbed the dust.
    </div>
{% else %}
    <div class="ascii-box" style="font-size:0.9rem;">
        {{ output|safe }}
    </div>

    {% if dangerous %}
        {% if already_claimed %}
            <hr>
            <div class="ascii-box" style="color:#f88;">
                <strong>The Archive Keeper speaks:</strong><br>
                ‚ÄúYou have already pulled a secret from these records.  
                The shelves hold nothing more for you.‚Äù
            </div>
        {% else %}
            {% if last_word %}
                <hr>
                <div class="ascii-box" style="color:#0f0;">
                    <strong>Secret Word Earned:</strong> {{ last_word }}<br><br>
                    ‚ÄúA shard of the Ancient Sentence reveals itself‚Ä¶‚Äù
                </div>
            {% endif %}
        {% endif %}
    {% else %}
        <hr>
        <div class="ascii-box" style="color:#ff6;">
            <strong>The Archive rustles faintly‚Ä¶</strong><br>
            Your UNION magic stirred the shelves, but not in the right way.<br>
            The keeper remains unconvinced ‚Äî try a more precise UNION spell.
        </div>
    {% endif %}
{% endif %}

<p style="margin-top:20px;">
    <a href="/admin_secret">‚ñ∂ Level 5: Admin Login Bypass</a>
</p>

{% endblock %}
